{% macro linkset(setname) -%}
{% if setname == "" -%}
{% set setname="default" %}
{%- endif %}
<a title="All builds matching set {{ setname }}" href="{{ url_for('sets', setname=setname) }}">{{ setname }}</a>
{% if setname[:2].upper() == "PR" and setname[2:].isdigit() %}
{% set link="http://bugs.FreeBSD.org/" + setname[2:] %}
{% elif setname[:1].upper() == "D" and setname[1:].isdigit() %}
{% set link="http://reviews.FreeBSD.org/" + setname %}
{% endif %}
{% if link %}
<a title="Related issue" href="{{ link }}"><span class="glyphicon glyphicon-share-alt"></span></a>
{% endif %}
{%- endmacro %}

{% macro linkbuild(build, servers) -%}
<a title="All builds matching buildname {{ build.buildname }}" href="{{ url_for('builds', buildname=build.buildname) }}">{{ build.buildname }}</a>
{{ linkpoudrierebuild(build, servers) }}
{%- endmacro %}


{% macro linkpoudrierebuild(build, servers) -%}
<a title="Poudriere Build" href="http://{{ servers[build.server].host }}/build.html?mastername={{ build.mastername }}&amp;build={{ build.buildname }}"><span class="glyphicon glyphicon-share-alt"></a>
{%- endmacro %}

{% macro linkmaster(build, servers) -%}
<a title="Poudriere Jail" href="http://{{ servers[build.server].host }}/jail.html?mastername={{ build.mastername }}">{{ build.mastername }}</a>
{%- endmacro %}

{% macro linkserver(build, servers) -%}
<a title="Poudriere Server" href="http://{{ servers[build.server].host }}/">{{ build.server }}</a>
{%- endmacro %}

{% macro linklog(build, servers, pkgname) -%}
<a title="{{ pkgname }} Build Log" href="http://{{ servers[build.server].host }}/data/{{ build.mastername }}/{{ build.buildname }}/logs/{{ pkgname }}.log">{{ pkgname }}</a>
{%- endmacro %}
